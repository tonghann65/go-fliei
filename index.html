<html>
  <head>
    <title>Watch on Videy &#8212; Free and Simple Video Hosting</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="icon" type="image/x-icon" href="https://videy.co/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="../assets/style.css?cache=696041190990">
    <script src="/assets/sw-init.js"></script>
    <style>
      .video-actions {
        width: 100%;
        display: flex;
        justify-content: center;
        display: none;
      }

      .video-actions-inner {
        width: 100%;
        max-width: 720px;
        display: flex;
        gap: 8px;
        padding: 12px 12px 6px 12px;
        overflow-x: auto;
        scrollbar-width: none;
        -ms-overflow-style: none;
        white-space: nowrap;
      }
      
      .video-actions-inner::-webkit-scrollbar {
        display: none;
      }
      
      .action-btn {
        background: #f2f2f2;
        border: none;
        padding: 8px 16px;
        border-radius: 16px;
        font-family: inherit;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        transition: background-color 0.2s;
        flex-shrink: 0;
      }

      .action-btn, .action-btn a {
        color: #000;
      }
      
      .action-btn:hover {
        background: #e5e5e5;
      }
    </style>
  </head>
  <body data-version="v1.0.4">
    <div class="container">
      <div class="top">
        <div class="logo">
          <a href="/">videy</a>
        </div>
        <a href="/">
            <div class="upload">Upload</div>
        </a>
        <div class="more">
          <a href="/advertise">Advertise</a>
        </div>
      </div>
      <div id="emailModal" class="modal">
        <div class="modal-content">
          <span class="modal-close">&times;</span>
          <h2>Get more like this</h2>
          <form id="emailForm">
            <input type="email" id="emailInput" placeholder="Enter your email" required>
            <button type="submit">Submit</button>
          </form>
        </div>
      </div>
      <div id="reportModal" class="modal">
        <div class="modal-content">
          <span class="modal-close">&times;</span>
          <h2>What's wrong with this content?</h2>
          <form id="reportForm">
            <div class="report-options">
              <label><input type="radio" name="reportReason" value="dislike"> I don't like it</label>
              <label><input type="radio" name="reportReason" value="hateful"> It is hateful or offensive</label>
              <label><input type="radio" name="reportReason" value="csam"> It is CSAM</label>
              <label><input type="radio" name="reportReason" value="illegal"> It is illegal</label>
            </div>
            <button type="submit">Submit</button>
          </form>
        </div>
      </div>
      <div class="video">
        <div class="video-inner">
          <video autoplay="" controls="" width="100%" id="video" playsinline>
            <source type="video/mp4">
            Your browser does not support the video tag.
        </video>
        <div id="video-error" style="display: none;" class="video-error-container">
        <div class="video-error">Video could not load.</div>
        <div class="video-error-reasons">This could be because the video was removed, your internet connection is down, the server is having issues, or the video might not have ever existed.</div>
      </div>
        </div>
      </div>
      <div class="video-actions">
        <div class="video-actions-inner">
          <button class="action-btn" id="shareVideo">Share Video</button>
          <button class="action-btn" id="copyUrl">Copy Link</button>
          <button class="action-btn" id="uploadVideo">Upload</button>
          <button class="action-btn" id="subscribeBtn">Subscribe</button>
          <button class="action-btn" id="reportBtn">Report</button>
        </div>
      </div>
      <div class="as">
        <iframe id="ads-iframe" src="" style="width: 100%; height: 500px; border: none; display: none;"></iframe>
      </div>
      <div class="footer">
        <div class="copyright"> Copyright &copy; <span id="year"></span> TRUE DOMAIN PRIVACY, LLC </div>
        <div class="legal">
          <div class="item">
            <a href="/terms-of-service">Terms of Service</a>
          </div>
          <div class="item">
            <a href="#" id="reportAbuse">Report Abuse</a>
          </div>
        </div>
      </div>
    </div>
    <!-- Google tag (gtag.js) -->
    <script async defer src="https://www.googletagmanager.com/gtag/js?id=G-BDP4EF6BCQ"></script>
    <script>
      function getAdGroup() {
        let adGroup = localStorage.getItem('ad_group');
        if (!adGroup) {
          adGroup = Math.floor(Math.random() * 100) + 1;
          localStorage.setItem('ad_group', adGroup);
        }
        return parseInt(adGroup);
      }

      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-BDP4EF6BCQ');
      
      const adGroup = getAdGroup();
      if (adGroup === 1) {
        gtag('config', 'G-V6HMYKY6Z0');
      } else if (adGroup === 2) {
        gtag('config', 'G-4T961TR3P1');
      }
    </script>
    <script>
      document.getElementById('year').textContent = new Date().getFullYear();
    </script>
     <script>
        var videoLink;
        $(document).ready(function() {
            function getParameterByName(name) {
                name = name.replace(/[\[\]]/g, '\\$&');
                var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
                    results = regex.exec(window.location.href);
                if (!results) return null;
                if (!results[2]) return '';
                return decodeURIComponent(results[2].replace(/\+/g, ' '));
            }

            var sourceParam = getParameterByName('source');
            if (sourceParam) {
                var url = new URL(window.location.href);
                url.searchParams.delete('source');
                window.history.replaceState({}, '', url);

                if (sourceParam === 'nativeApp') {
                    localStorage.setItem('uploader', 'true');
                }
            }

            var paramValue = getParameterByName('id');
            if (paramValue) {
                var fileType = '.mp4';
          
                if (paramValue.length === 9 && paramValue[8] === '2') {
                    fileType = '.mov';
                }
                videoLink = 'https://cdn.videy.co/' + paramValue + fileType;
                $('#video').attr('src', videoLink);
            }
        });
    </script>
    <script>
        const video = document.getElementById('video');
        const errorMessage = document.getElementById('video-error');
        const videoActions = document.getElementsByClassName('video-actions')[0];
     
        video.addEventListener('error', function(event) {
          const error = video.error;
          if (error && error.code === 4) {
              errorMessage.style.display = 'block';
              video.style.display = 'none';
              videoActions.style.display = 'none';
          }
        });
    </script>
    <script>
$(document).ready(function() {
  const uploader = localStorage.getItem('uploader') || 'false';
  const screenWidth = window.screen.width;
  const adGroup = getAdGroup();
  const url = 'https://ads-api.videy.co/api/ad_type?uploader=' + uploader + '&width=' + screenWidth + '&ad_group=' + adGroup;
  $.get(url, function(response) {
    try {
      const data = typeof response === 'string' ? JSON.parse(response) : response;

      if (data.type === 'scorch') {
        $('#ads-iframe').attr('src', 'https://ads3.videy.co/?url=' + encodeURIComponent(videoLink));
        $('#ads-iframe').show();
      } else if (data.type === 'exo' || data.type === 'aads') {
        if (data['300x250'] && data.sticky) {
          $('.as').append(data['300x250']);
          $('.as').append(data.sticky);
        } else {
          const code = data.code;
          $('.as').append(code);
        }
      }
    } catch (error) {
      console.error("Error parsing the JSON response:", error);
      $('#ads-iframe').attr('src', 'https://ads3.videy.co/?url=' + encodeURIComponent(videoLink));
      $('#ads-iframe').show();
    }
  });
});

</script>

<script>
  $(document).ready(function() {
    // Remove duplicate event handlers
    $('#reportAbuse').off('click').on('click', function(e) {
      e.preventDefault();
      $('#reportModal').show();
    });

    $('#subscribeBtn').on('click', function() {
      $('#emailModal').show();
    });

    $('#reportBtn').on('click', function() {
      $('#reportModal').show();
    });

    $('#copyUrl').on('click', function() {
      navigator.clipboard.writeText(window.location.href).then(function() {
        const originalText = $(this).text();
        $(this).text('Copied!');
        setTimeout(() => {
          $(this).text(originalText);
        }, 2000);
      }.bind(this));
    });

    $('#shareVideo').on('click', function() {
      if (navigator.share) {
        navigator.share({
          title: document.title,
          url: window.location.href
        });
      } else {
        $('#copyUrl').click();
      }
    });

    $('#uploadVideo').on('click', function() {
      window.location.href = '/';
    });

    $('#emailForm').off('submit').on('submit', function(event) {
      event.preventDefault();
      const visitorId = localStorage.getItem('visitorId');
      const email = $('#emailInput').val();
      const videoId = getURLParameter('id');
      
      if ($(this).find('button[type="submit"]').text() === 'Submit') {
        $('#emailModal .modal-content h2').text("You've subscribed!");
        $('#emailInput').remove();
        $(this).find('button[type="submit"]').text('Close');

        const url = `https://in.videy.co/api/subscribe?email=${encodeURIComponent(email)}&visitorId=${encodeURIComponent(visitorId)}&videoSubscribedFrom=${encodeURIComponent(videoId)}`;

        $.post(url, function(response) {
          console.log("Subscription successful", response);
          localStorage.setItem('subscribed', 'true');
        }).fail(function(err) {
          console.error("Subscription failed", err);
        });
      } else {
        $('#emailModal').hide();
      }
    });

    $('#reportForm').off('submit').on('submit', function(event) {
      event.preventDefault();
      const reportReason = $('input[name="reportReason"]:checked').val();
      const videoId = getURLParameter('id');
      
      // First update the UI for all report types
      $('#reportModal .modal-content h2').text("Report submitted");
      $('.report-options').hide();
      $('#reportForm button[type="submit"]').text('Close');
      
      // Only make API call for specific report types
      if (reportReason === 'csam' || reportReason === 'illegal') {
        $.get(`https://api.videy.co/api/report?videoId=${encodeURIComponent(videoId)}&reportReason=${encodeURIComponent(reportReason)}`)
          .fail(function() {
            console.error("Failed to submit report");
            // We still show success to the user even if the API call fails
          });
      }
      
      // Handle the close button click
      $('#reportForm button[type="submit"]').off('click').on('click', function() {
        $('#reportModal').hide();
      });
    });

    $('.modal-close').off('click').on('click', function() {
      $(this).closest('.modal').hide();
    });

    function getURLParameter(name) {
      var urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(name);
    }
  });
</script>

<script>
  $(document).ready(function() {
    function generateUUID() {
        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
            var r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);
            return v.toString(16);
        });
    }

    if (!localStorage.getItem('visitorId')) {
        localStorage.setItem('visitorId', generateUUID());
    }

    function getURLParameter(name) {
        var urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(name);
    }

    function postWatchedList(visitorId, watchedList) {
        const data = {
            visitorId: visitorId,
            watched: JSON.stringify(watchedList)
        };

        $.post('https://in.videy.co/api/log', data)
            .fail(function(err) {
                console.error("Failed to log watched list:", err);
            });
    }

    var idParam = getURLParameter('id');
    if (idParam) {
        var watchedList = JSON.parse(localStorage.getItem('watched')) || [];
        if (!watchedList.includes(idParam)) {

            watchedList.push(idParam);
            localStorage.setItem('watched', JSON.stringify(watchedList));

            if (Math.random() < 0.1) {

              if (watchedList.length > 2) {
                  var visitorId = localStorage.getItem('visitorId');
                  postWatchedList(visitorId, watchedList);
              }

              if (watchedList.length > 10) {
                  watchedList = watchedList.slice(5);
                  localStorage.setItem('watched', JSON.stringify(watchedList));
              }

            }

        }
    }
});
</script>
  </body>
</html>
